{"ast":null,"code":"import _classCallCheck from \"/Users/kakao/miniproj/whichwhich/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kakao/miniproj/whichwhich/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kakao/miniproj/whichwhich/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kakao/miniproj/whichwhich/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kakao/miniproj/whichwhich/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/kakao/miniproj/whichwhich/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/kakao/miniproj/whichwhich/src/Component/WhichMap.js\";\nimport React, { Component } from 'react';\nimport redDot1 from '../images/red_dot.png';\nimport redDot2 from '../images/red_dot2.png';\nimport redDot3 from '../images/red_dot3.png';\nimport redDot4 from '../images/red_dot4.png';\nimport redDot5 from '../images/red_dot5.png';\nimport blueDot1 from '../images/blue_dot.png';\nimport blueDot2 from '../images/blue_dot2.png';\nimport blueDot3 from '../images/blue_dot3.png';\nimport blueDot4 from '../images/blue_dot4.png';\nimport blueDot5 from '../images/blue_dot5.png';\nimport greenDot1 from '../images/green_dot.png';\nimport greenDot2 from '../images/green_dot2.png';\nimport greenDot3 from '../images/green_dot3.png';\nimport greenDot4 from '../images/green_dot4.png';\nimport greenDot5 from '../images/green_dot5.png';\nimport darkDot1 from '../images/dark_dot.png';\nimport darkDot2 from '../images/dark_dot2.png';\nimport darkDot3 from '../images/dark_dot3.png';\nimport darkDot4 from '../images/dark_dot4.png';\nimport darkDot5 from '../images/dark_dot5.png';\nvar imageSize = new window.daum.maps.Size(18, 20);\nvar imageOption = {\n  offset: new window.daum.maps.Point(15, 15)\n};\n\nfunction getCoordsHash(coords) {\n  return coords.ib * 3 + coords.jb * 1004;\n}\n\nfunction getMarkerImageBase(index) {\n  if (index === 0) {\n    return redDot1;\n  } else if (index === 1) {\n    return blueDot1;\n  }\n}\n\nfunction getMarkerImageSource(index, count) {\n  if (index === 0) {\n    if (count === 2) {\n      return redDot2;\n    } else if (count === 3) {\n      return redDot3;\n    } else if (count === 4) {\n      return redDot4;\n    } else {\n      return redDot5;\n    }\n  } else if (index === 1) {\n    if (count === 2) {\n      return blueDot2;\n    } else if (count === 3) {\n      return blueDot3;\n    } else if (count === 4) {\n      return blueDot4;\n    } else {\n      return blueDot5;\n    }\n  }\n}\n\nvar WhichMap =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(WhichMap, _Component);\n\n  function WhichMap() {\n    var _this;\n\n    _classCallCheck(this, WhichMap);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WhichMap).call(this));\n    _this.setMarker = _this.setMarker.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleMapClick = _this.handleMapClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.searchAddress = _this.searchAddress.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleInfoChange1 = _this.handleInfoChange1.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleInfoChange2 = _this.handleInfoChange2.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleInfoChange3 = _this.handleInfoChange3.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleInfoChange4 = _this.handleInfoChange4.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleAddressChange = _this.handleAddressChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDrawMarker = _this.handleDrawMarker.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      el: '',\n      daumMap: '',\n      marker: '',\n      geocoder: '',\n      latitude: 0,\n      longitude: 0,\n      profileId: 0,\n      address: '',\n      date: '',\n      info1: '',\n      info2: '',\n      info3: '',\n      info4: '',\n      markerImage: {}\n    };\n    return _this;\n  }\n\n  _createClass(WhichMap, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var el = document.getElementById('map');\n      var daumMap = new window.daum.maps.Map(el, {\n        center: new window.daum.maps.LatLng(37.52648259543062, 126.86435765802705),\n        level: 6\n      }); // const imageSize = new window.daum.maps.Size(12, 13);\n      // const imageOption = { offset : new window.daum.maps.Point(15, 15)}\n\n      var markerImage = new window.daum.maps.MarkerImage(redDot1, imageSize, imageOption);\n      console.log(markerImage, 'markerImage');\n      var marker = new window.daum.maps.Marker({\n        map: this.state.daumMap,\n        position: daumMap.getCenter(),\n        image: markerImage\n      });\n      var geocoder = new window.daum.maps.services.Geocoder();\n      this.setState({\n        el: el,\n        daumMap: daumMap,\n        marker: marker,\n        geocoder: geocoder,\n        markerImage: markerImage\n      });\n      marker.setMap(this.state.daumMap);\n      window.daum.maps.event.addListener(daumMap, 'click', this.handleMapClick);\n    }\n  }, {\n    key: \"setMarker\",\n    value: function setMarker(locPosition) {\n      var marker = this.state.marker;\n      marker.setMap(this.state.daumMap);\n      marker.setPosition(locPosition);\n    }\n  }, {\n    key: \"handleMapClick\",\n    value: function handleMapClick(e) {\n      console.log(e.latLng);\n      this.setState({\n        latitude: e.latLng.ib,\n        longitude: e.latLng.jb\n      });\n      this.setMarker(e.latLng);\n    }\n  }, {\n    key: \"handleAddressChange\",\n    value: function handleAddressChange(e) {\n      this.setState({\n        address: e.target.value\n      });\n    } // handleSubmit(e) {\n    //   e.preventDefault();\n    //   const { date, latitude, longitude, profileId, address, info } = this.state;\n    //   const url = `/api/report/missing-person/${profileId}`;\n    //   fetch(url, {\n    //     method: 'post',\n    //     headers: {'Content-Type':'application/json'},\n    //     body: JSON.stringify({\n    //       \"witnessAddress\" : address,\n    //       \"witnessedAt\": date,\n    //       \"latitude\": latitude, \n    //       \"longitude\": longitude,\n    //       \"description\": info\n    //     }),\n    //   }).then(res => {\n    //     if(res.status === 200) {\n    //       window.location.href=`/person/${profileId}`;\n    //     }\n    //   });\n    // }\n\n  }, {\n    key: \"handleInfoChange1\",\n    value: function handleInfoChange1(e) {\n      this.setState({\n        info1: e.target.value\n      });\n    }\n  }, {\n    key: \"handleInfoChange2\",\n    value: function handleInfoChange2(e) {\n      this.setState({\n        info2: e.target.value\n      });\n    }\n  }, {\n    key: \"handleInfoChange3\",\n    value: function handleInfoChange3(e) {\n      this.setState({\n        info3: e.target.value\n      });\n    }\n  }, {\n    key: \"handleInfoChange4\",\n    value: function handleInfoChange4(e) {\n      this.setState({\n        info4: e.target.value\n      });\n    }\n  }, {\n    key: \"searchAddress\",\n    value: function searchAddress(e) {\n      e.preventDefault();\n      var daumMap = this.state.daumMap;\n      var searchWord = document.getElementById('search_address').value;\n      console.log(searchWord, 'searchWord');\n      console.log(daumMap, 'clicked');\n      this.state.geocoder.addressSearch(searchWord, function (result, status) {\n        if (status === window.daum.maps.services.Status.OK) {\n          var coords = new window.daum.maps.LatLng(result[0].y, result[0].x);\n          daumMap.setCenter(coords);\n        }\n      });\n    }\n  }, {\n    key: \"handleDrawMarker\",\n    value: function handleDrawMarker(e) {\n      e.preventDefault();\n      var _this$state = this.state,\n          daumMap = _this$state.daumMap,\n          info1 = _this$state.info1,\n          info2 = _this$state.info2,\n          info3 = _this$state.info3,\n          info4 = _this$state.info4,\n          geocoder = _this$state.geocoder,\n          markerImage = _this$state.markerImage;\n      console.log(info1);\n      console.log(info2);\n      var addressList = info1.split(',');\n      var addressList2 = info2.split(',');\n      var addressList3 = info3.split(',');\n      var addressList4 = info4.split(',');\n      console.log(addressList, 'addressList');\n      var errorList = []; // console.log(markerImage, 'image');\n\n      var history = new Array();\n      var coordsMap = new Map();\n      var hop = Array.of(addressList, addressList2, addressList3, addressList4);\n      console.log(hop);\n      coordsMap.set('hello', 'bonjour');\n      var processes = hop.map(function (addressList, index) {\n        return new Promise(function (resolve) {\n          addressList.forEach(function (address) {\n            geocoder.addressSearch(address, function (result, status) {\n              if (status === window.daum.maps.services.Status.OK) {\n                var coords = new window.daum.maps.LatLng(result[0].y, result[0].x);\n                var tmpMarker = {};\n\n                if (coordsMap.get(getCoordsHash(coords)) !== undefined) {\n                  console.log(\"중복발견\");\n                  var newCount = coordsMap.get(getCoordsHash(coords)) + 1;\n                  coordsMap.set(getCoordsHash(coords), newCount);\n                  var newMarkerImage = new window.daum.maps.MarkerImage(getMarkerImageSource(index, newCount), imageSize, imageOption);\n                  tmpMarker = new window.daum.maps.Marker({\n                    position: coords,\n                    image: newMarkerImage\n                  });\n                } else {\n                  coordsMap.set(getCoordsHash(coords), 1);\n                  var markerImageBase = new window.daum.maps.MarkerImage(getMarkerImageBase(index), imageSize, imageOption);\n                  tmpMarker = new window.daum.maps.Marker({\n                    position: coords,\n                    image: markerImageBase\n                  });\n                }\n\n                tmpMarker.setMap(daumMap);\n                resolve();\n              } else {\n                console.log(address, \"실패\");\n                errorList.push(address);\n                resolve();\n              }\n            });\n          });\n        });\n      }); // let processes = addressList.map((address) => {\n      //   return new Promise((resolve) => {\n      //     geocoder.addressSearch(address, function(result, status) {\n      //       if (status === window.daum.maps.services.Status.OK) {\n      //         let coords = new window.daum.maps.LatLng(result[0].y, result[0].x);\n      //         if (history.includes(coords.ib)) {\n      //           console.log('중복발견');\n      //         }\n      //         console.log(coords.ib, 'coords');\n      //         let tmpMarker = {};\n      //         if (coordsMap.get(getCoordsHash(coords)) !== undefined) {\n      //           console.log(\"중복발견\");\n      //           var newCount = coordsMap.get(getCoordsHash(coords)) + 1;\n      //           coordsMap.set(getCoordsHash(coords), newCount);\n      //           const newMarkerImage = new window.daum.maps.MarkerImage(getMarkerImageSource(newCount), imageSize, imageOption);\n      //           tmpMarker = new window.daum.maps.Marker({\n      //             position: coords,\n      //             image: newMarkerImage\n      //           });\n      //         } else {\n      //           coordsMap.set(getCoordsHash(coords), 1);\n      //           tmpMarker = new window.daum.maps.Marker({\n      //             position: coords,\n      //             image: markerImage\n      //           });\n      //         }\n      //         tmpMarker.setMap(daumMap);\n      //         resolve();\n      //       } else {\n      //         console.log(address, \"실패\");\n      //         errorList.push(address);\n      //         resolve();\n      //       }\n      //     });\n      //   })\n      // });\n\n      Promise.all(processes).then(function () {\n        console.log(history, 'history');\n        console.log(coordsMap, 'coordsMap');\n      }); // addressList.forEach(function(value, i) {\n      //   geocoder.addressSearch(value, function(result, status) {\n      //     if (status === window.daum.maps.services.Status.OK) {\n      //       let coords = new window.daum.maps.LatLng(result[0].y, result[0].x);\n      //       if (history.includes(coords.ib)) {\n      //         console.log('중복발견');\n      //       }\n      //       console.log(coords.ib, 'coords' + i);\n      //       // if (history.contains(coords.ib)) {\n      //       //   console.log(\"중복발견\");\n      //       // }\n      //       history.push(coords.ib);\n      //       let tmpMarker = new window.daum.maps.Marker({\n      //         position: coords,\n      //         image: markerImage\n      //       });\n      //       tmpMarker.setMap(daumMap);\n      //     } else {\n      //       console.log(value, \"실패\" + i);\n      //       errorList.push(value);\n      //     }\n      //   });\n      // });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var mapStyle = {\n        width: '100%',\n        height: '700px',\n        overflow: 'hidden',\n        margin: '15px 0'\n      };\n      return React.createElement(\"div\", {\n        class: \"ui form\",\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: 'center',\n          flexDirection: 'column'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        style: {\n          width: \"80vw\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"ui divider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"map\",\n        style: mapStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group col-md-12\",\n        style: {\n          margin: '15px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"search_address\",\n        style: {\n          width: \"80%\"\n        },\n        type: \"text\",\n        onChange: this.handleAddressChange,\n        placeholder: \"\\uC9C0\\uB3C4 \\uC911\\uC2EC \\uAE30\\uC900\\uC774 \\uB420 \\uB3C4\\uB85C\\uBA85 \\uC8FC\\uC18C\\uB97C \\uC785\\uB825\\uD574 \\uC8FC\\uC138\\uC694\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        class: \"ui primary basic button\",\n        onClick: this.searchAddress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, \">\")))), React.createElement(\"div\", {\n        class: \"ui divider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        class: \"form-row\",\n        style: {\n          margin: \"20px 0\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        style: {\n          marginBottom: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      }, \"\\uC8FC\\uC18C \\uBAA9\\uB85D \", React.createElement(\"span\", {\n        class: \"badge badge-pill badge-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      }, \"red\")), React.createElement(\"textarea\", {\n        onChange: this.handleInfoChange1,\n        style: {\n          width: \"100%\",\n          height: \"150px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        style: {\n          marginBottom: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, \"\\uC8FC\\uC18C \\uBAA9\\uB85D \", React.createElement(\"span\", {\n        class: \"badge badge-pill badge-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, \"blue\")), React.createElement(\"textarea\", {\n        onChange: this.handleInfoChange2,\n        style: {\n          width: \"100%\",\n          height: \"150px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"form-row\",\n        style: {\n          margin: \"20px 0\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        style: {\n          marginBottom: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384\n        },\n        __self: this\n      }, \"\\uC8FC\\uC18C \\uBAA9\\uB85D \", React.createElement(\"span\", {\n        class: \"badge badge-pill badge-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384\n        },\n        __self: this\n      }, \"green\")), React.createElement(\"textarea\", {\n        onChange: this.handleInfoChange3,\n        style: {\n          width: \"100%\",\n          height: \"150px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        style: {\n          marginBottom: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }, \"\\uC8FC\\uC18C \\uBAA9\\uB85D \", React.createElement(\"span\", {\n        class: \"badge badge-pill badge-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }, \"dark\")), React.createElement(\"textarea\", {\n        onChange: this.handleInfoChange4,\n        style: {\n          width: \"100%\",\n          height: \"150px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }))), React.createElement(\"button\", {\n        class: \"btn btn-primary\",\n        onClick: this.handleDrawMarker,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, \"\\uD45C\\uC2DC\\uD558\\uAE30\"))));\n    }\n  }]);\n\n  return WhichMap;\n}(Component);\n\nexport { WhichMap as default };","map":{"version":3,"sources":["/Users/kakao/miniproj/whichwhich/src/Component/WhichMap.js"],"names":["React","Component","redDot1","redDot2","redDot3","redDot4","redDot5","blueDot1","blueDot2","blueDot3","blueDot4","blueDot5","greenDot1","greenDot2","greenDot3","greenDot4","greenDot5","darkDot1","darkDot2","darkDot3","darkDot4","darkDot5","imageSize","window","daum","maps","Size","imageOption","offset","Point","getCoordsHash","coords","ib","jb","getMarkerImageBase","index","getMarkerImageSource","count","WhichMap","setMarker","bind","handleMapClick","searchAddress","handleInfoChange1","handleInfoChange2","handleInfoChange3","handleInfoChange4","handleAddressChange","handleDrawMarker","state","el","daumMap","marker","geocoder","latitude","longitude","profileId","address","date","info1","info2","info3","info4","markerImage","document","getElementById","Map","center","LatLng","level","MarkerImage","console","log","Marker","map","position","getCenter","image","services","Geocoder","setState","setMap","event","addListener","locPosition","setPosition","e","latLng","target","value","preventDefault","searchWord","addressSearch","result","status","Status","OK","y","x","setCenter","addressList","split","addressList2","addressList3","addressList4","errorList","history","Array","coordsMap","hop","of","set","processes","Promise","resolve","forEach","tmpMarker","get","undefined","newCount","newMarkerImage","markerImageBase","push","all","then","mapStyle","width","height","overflow","margin","display","justifyContent","alignItems","flexDirection","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport redDot1 from '../images/red_dot.png';\nimport redDot2 from '../images/red_dot2.png';\nimport redDot3 from '../images/red_dot3.png';\nimport redDot4 from '../images/red_dot4.png';\nimport redDot5 from '../images/red_dot5.png';\nimport blueDot1 from '../images/blue_dot.png';\nimport blueDot2 from '../images/blue_dot2.png';\nimport blueDot3 from '../images/blue_dot3.png';\nimport blueDot4 from '../images/blue_dot4.png';\nimport blueDot5 from '../images/blue_dot5.png';\nimport greenDot1 from '../images/green_dot.png';\nimport greenDot2 from '../images/green_dot2.png';\nimport greenDot3 from '../images/green_dot3.png';\nimport greenDot4 from '../images/green_dot4.png';\nimport greenDot5 from '../images/green_dot5.png';\nimport darkDot1 from '../images/dark_dot.png';\nimport darkDot2 from '../images/dark_dot2.png';\nimport darkDot3 from '../images/dark_dot3.png';\nimport darkDot4 from '../images/dark_dot4.png';\nimport darkDot5 from '../images/dark_dot5.png';\n\n\n\n\nconst imageSize = new window.daum.maps.Size(18, 20);\nconst imageOption = { offset : new window.daum.maps.Point(15, 15)}\n\nfunction getCoordsHash(coords) {\n  return coords.ib * 3 + coords.jb * 1004;\n}\n\nfunction getMarkerImageBase(index) {\n  if (index === 0) {\n    return redDot1;\n  } else if (index === 1) {\n    return blueDot1;\n  }\n\n}\n\nfunction getMarkerImageSource(index, count) {\n  if (index === 0) {\n    if (count === 2) {\n      return redDot2;\n    } else if (count === 3) {\n      return redDot3;\n    } else if (count === 4) {\n      return redDot4;\n    } else {\n      return redDot5;\n    }\n  } else if (index === 1) {\n    if (count === 2) {\n      return blueDot2;\n    } else if (count === 3) {\n      return blueDot3;\n    } else if (count === 4) {\n      return blueDot4;\n    } else {\n      return blueDot5;\n    }\n  }\n}\n\nexport default class WhichMap extends Component{\n  constructor() {\n    super();\n    this.setMarker = this.setMarker.bind(this);\n    this.handleMapClick = this.handleMapClick.bind(this);\n    this.searchAddress = this.searchAddress.bind(this);\n    this.handleInfoChange1 = this.handleInfoChange1.bind(this);\n    this.handleInfoChange2 = this.handleInfoChange2.bind(this);\n    this.handleInfoChange3 = this.handleInfoChange3.bind(this);\n    this.handleInfoChange4 = this.handleInfoChange4.bind(this);\n    this.handleAddressChange = this.handleAddressChange.bind(this);\n    this.handleDrawMarker = this.handleDrawMarker.bind(this);\n\n    this.state = {\n      el: '',\n      daumMap: '',\n      marker: '',\n      geocoder: '',\n      latitude: 0,\n      longitude: 0,\n      profileId: 0,\n      address: '',\n      date: '',\n      info1: '',\n      info2: '',\n      info3: '',\n      info4: '',\n      markerImage: {}\n    }\n  }\n\n  componentDidMount() {\n\n    let el = document.getElementById('map');\n    let daumMap = new window.daum.maps.Map(el, {\n      center: new window.daum.maps.LatLng(37.52648259543062, 126.86435765802705),\n      level: 6\n    });\n\n    // const imageSize = new window.daum.maps.Size(12, 13);\n    // const imageOption = { offset : new window.daum.maps.Point(15, 15)}\n    const markerImage = new window.daum.maps.MarkerImage(redDot1, imageSize, imageOption);\n\n    console.log(markerImage, 'markerImage');\n\n    let marker = new window.daum.maps.Marker({\n      map: this.state.daumMap,\n      position: daumMap.getCenter(),\n      image: markerImage\n    });\n\n    let geocoder = new window.daum.maps.services.Geocoder();\n\n    this.setState({\n      el, daumMap, marker, geocoder, markerImage\n    });\n\n    marker.setMap(this.state.daumMap);\n    window.daum.maps.event.addListener(daumMap, 'click', this.handleMapClick);\n  }\n\n  setMarker(locPosition) {\n    const { marker } = this.state;\n    \n    marker.setMap(this.state.daumMap);\n    marker.setPosition(locPosition);\n  }\n\n  handleMapClick(e) {\n    console.log(e.latLng);\n    this.setState({\n      latitude: e.latLng.ib,\n      longitude: e.latLng.jb\n    });\n    this.setMarker(e.latLng);\n  }\n\n  handleAddressChange(e) {\n    this.setState({\n      address: e.target.value\n    })\n  }\n\n  // handleSubmit(e) {\n  //   e.preventDefault();\n  //   const { date, latitude, longitude, profileId, address, info } = this.state;\n    \n  //   const url = `/api/report/missing-person/${profileId}`;\n    \n  //   fetch(url, {\n  //     method: 'post',\n  //     headers: {'Content-Type':'application/json'},\n  //     body: JSON.stringify({\n  //       \"witnessAddress\" : address,\n  //       \"witnessedAt\": date,\n  //       \"latitude\": latitude, \n  //       \"longitude\": longitude,\n  //       \"description\": info\n  //     }),\n  //   }).then(res => {\n  //     if(res.status === 200) {\n  //       window.location.href=`/person/${profileId}`;\n  //     }\n  //   });\n  // }\n\n  handleInfoChange1(e) {\n    this.setState({\n      info1: e.target.value\n    })\n  }\n\n  handleInfoChange2(e) {\n    this.setState({\n      info2: e.target.value\n    })\n  }\n\n  handleInfoChange3(e) {\n    this.setState({\n      info3: e.target.value\n    })\n  }\n\n  handleInfoChange4(e) {\n    this.setState({\n      info4: e.target.value\n    })\n  }\n\n  searchAddress(e) {\n    e.preventDefault();\n    const { daumMap } = this.state;\n    const searchWord = document.getElementById('search_address').value;\n    console.log(searchWord, 'searchWord');\n    console.log(daumMap,'clicked');\n    this.state.geocoder.addressSearch(searchWord, function(result, status) {\n      if (status === window.daum.maps.services.Status.OK) {\n        let coords = new window.daum.maps.LatLng(result[0].y, result[0].x);\n        daumMap.setCenter(coords);\n      }\n    });\n    \n  }\n\n  handleDrawMarker(e) {\n    e.preventDefault();\n    const { daumMap, info1, info2, info3, info4, geocoder, markerImage } = this.state;\n\n    console.log(info1);\n    console.log(info2);\n    const addressList = info1.split(',');\n    const addressList2 = info2.split(',');\n    const addressList3 = info3.split(',');\n    const addressList4 = info4.split(',');\n    \n    console.log(addressList, 'addressList');\n    const errorList = [];\n    // console.log(markerImage, 'image');\n    const history = new Array();\n    var coordsMap = new Map();\n    const hop = Array.of(addressList, addressList2, addressList3, addressList4);\n    console.log(hop);\n    coordsMap.set('hello', 'bonjour');\n\n    let processes = hop.map((addressList, index) => {\n      return new Promise((resolve) => {\n        addressList.forEach(address => {\n          geocoder.addressSearch(address, function(result, status) {\n            if (status === window.daum.maps.services.Status.OK) {\n              let coords = new window.daum.maps.LatLng(result[0].y, result[0].x);\n    \n              let tmpMarker = {};\n  \n              if (coordsMap.get(getCoordsHash(coords)) !== undefined) {\n                console.log(\"중복발견\");\n  \n                var newCount = coordsMap.get(getCoordsHash(coords)) + 1;\n                coordsMap.set(getCoordsHash(coords), newCount);\n                const newMarkerImage = new window.daum.maps.MarkerImage(getMarkerImageSource(index, newCount), imageSize, imageOption);\n                \n                tmpMarker = new window.daum.maps.Marker({\n                  position: coords,\n                  image: newMarkerImage\n                });\n              } else {\n                coordsMap.set(getCoordsHash(coords), 1);\n                const markerImageBase = new window.daum.maps.MarkerImage(getMarkerImageBase(index), imageSize, imageOption);\n                tmpMarker = new window.daum.maps.Marker({\n                  position: coords,\n                  image: markerImageBase\n                });\n              }\n    \n              tmpMarker.setMap(daumMap);\n              resolve();\n            } else {\n              console.log(address, \"실패\");\n              errorList.push(address);\n              resolve();\n            }\n          });\n        })\n      })\n    });\n\n\n    // let processes = addressList.map((address) => {\n    //   return new Promise((resolve) => {\n    //     geocoder.addressSearch(address, function(result, status) {\n    //       if (status === window.daum.maps.services.Status.OK) {\n    //         let coords = new window.daum.maps.LatLng(result[0].y, result[0].x);\n    //         if (history.includes(coords.ib)) {\n    //           console.log('중복발견');\n    //         }\n    //         console.log(coords.ib, 'coords');\n  \n    //         let tmpMarker = {};\n\n    //         if (coordsMap.get(getCoordsHash(coords)) !== undefined) {\n    //           console.log(\"중복발견\");\n\n    //           var newCount = coordsMap.get(getCoordsHash(coords)) + 1;\n    //           coordsMap.set(getCoordsHash(coords), newCount);\n    //           const newMarkerImage = new window.daum.maps.MarkerImage(getMarkerImageSource(newCount), imageSize, imageOption);\n              \n    //           tmpMarker = new window.daum.maps.Marker({\n    //             position: coords,\n    //             image: newMarkerImage\n    //           });\n    //         } else {\n    //           coordsMap.set(getCoordsHash(coords), 1);\n    //           tmpMarker = new window.daum.maps.Marker({\n    //             position: coords,\n    //             image: markerImage\n    //           });\n    //         }\n  \n    //         tmpMarker.setMap(daumMap);\n    //         resolve();\n    //       } else {\n    //         console.log(address, \"실패\");\n    //         errorList.push(address);\n    //         resolve();\n    //       }\n    //     });\n    //   })\n    // });\n\n    Promise.all(processes).then(() => {\n      console.log(history, 'history');\n      console.log(coordsMap, 'coordsMap');\n    });\n\n    // addressList.forEach(function(value, i) {\n    //   geocoder.addressSearch(value, function(result, status) {\n    //     if (status === window.daum.maps.services.Status.OK) {\n    //       let coords = new window.daum.maps.LatLng(result[0].y, result[0].x);\n    //       if (history.includes(coords.ib)) {\n    //         console.log('중복발견');\n    //       }\n    //       console.log(coords.ib, 'coords' + i);\n\n    //       // if (history.contains(coords.ib)) {\n    //       //   console.log(\"중복발견\");\n    //       // }\n    //       history.push(coords.ib);\n\n    //       let tmpMarker = new window.daum.maps.Marker({\n    //         position: coords,\n    //         image: markerImage\n    //       });\n    //       tmpMarker.setMap(daumMap);\n    //     } else {\n    //       console.log(value, \"실패\" + i);\n    //       errorList.push(value);\n    //     }\n    //   });\n    // });\n\n  }\n\n\n  render() {\n    const mapStyle = {\n      width: '100%',\n      height: '700px',\n      overflow: 'hidden',\n      margin: '15px 0',\n    }\n\n    return(\n    <div class=\"ui form\" style={{display: \"flex\", justifyContent: \"center\", alignItems: 'center', flexDirection: 'column'}}>\n      <form style={{width: \"80vw\"}}>\n        <div class=\"ui divider\"></div>\n        <div>\n          <div id=\"map\" style={mapStyle}>\n          </div>\n          <div style={{display: 'flex', justifyContent: 'center', alignItems: 'center', }}>\n          <div class=\"form-group col-md-12\" style={{margin: '15px 0'}}>\n            <input id=\"search_address\" style={{width: \"80%\"}}type=\"text\" onChange={this.handleAddressChange} placeholder=\"지도 중심 기준이 될 도로명 주소를 입력해 주세요\"/>\n            <button class=\"ui primary basic button\" onClick={this.searchAddress}>></button>\n          </div>\n          </div>\n        </div>\n        <div class=\"ui divider\"></div>\n        <div class=\"form-row\" style={{margin: \"20px 0\"}}>\n          <div class=\"form-group col-md-6\">\n            <h3 style={{marginBottom: \"20px\"}}>주소 목록 <span class=\"badge badge-pill badge-danger\">red</span></h3>\n            <textarea onChange={this.handleInfoChange1} style={{width: \"100%\", height: \"150px\"}}></textarea>\n          </div>\n          <div class=\"form-group col-md-6\">\n            <h3 style={{marginBottom: \"20px\"}}>주소 목록 <span class=\"badge badge-pill badge-primary\">blue</span></h3>\n            <textarea onChange={this.handleInfoChange2} style={{width: \"100%\", height: \"150px\"}}></textarea>\n          </div>\n        </div>\n        <div class=\"form-row\" style={{margin: \"20px 0\"}}>\n          <div class=\"form-group col-md-6\">\n            <h3 style={{marginBottom: \"20px\"}}>주소 목록 <span class=\"badge badge-pill badge-success\">green</span></h3>\n            <textarea onChange={this.handleInfoChange3} style={{width: \"100%\", height: \"150px\"}}></textarea>\n          </div>\n          <div class=\"form-group col-md-6\">\n            <h3 style={{marginBottom: \"20px\"}}>주소 목록 <span class=\"badge badge-pill badge-dark\">dark</span></h3>\n            <textarea onChange={this.handleInfoChange4} style={{width: \"100%\", height: \"150px\"}}></textarea>\n          </div>\n        </div>\n        <button class=\"btn btn-primary\" onClick={this.handleDrawMarker}><b>표시하기</b></button>\n      </form>\n    </div>\n    );\n  }\n\n}"]},"metadata":{},"sourceType":"module"}
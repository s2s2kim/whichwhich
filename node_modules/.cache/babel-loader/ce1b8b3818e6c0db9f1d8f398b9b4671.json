{"ast":null,"code":"import _classCallCheck from \"/Users/kakao/swantest/whichwhich/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kakao/swantest/whichwhich/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kakao/swantest/whichwhich/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kakao/swantest/whichwhich/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kakao/swantest/whichwhich/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/kakao/swantest/whichwhich/my-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/kakao/swantest/whichwhich/my-app/src/Component/Map.js\";\nimport React, { Component } from 'react';\n\nvar Map =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Map, _Component);\n\n  function Map() {\n    var _this;\n\n    _classCallCheck(this, Map);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Map).call(this));\n    _this.setMarker = _this.setMarker.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleMapClick = _this.handleMapClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.searchAddress = _this.searchAddress.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDateChange = _this.handleDateChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleInfoChange = _this.handleInfoChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleAddressChange = _this.handleAddressChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      el: '',\n      daumMap: '',\n      marker: '',\n      geocoder: '',\n      latitude: 0,\n      longitude: 0,\n      profileId: 0,\n      address: '',\n      date: '',\n      info: ''\n    };\n    return _this;\n  }\n\n  _createClass(Map, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var id = this.props.match.params.id;\n      console.log(id, 'got id');\n      this.setState({\n        profileId: id\n      });\n      var el = document.getElementById('map');\n      var daumMap = new window.daum.maps.Map(el, {\n        center: new window.daum.maps.LatLng(37.401, 127.109),\n        level: 4\n      });\n      var marker = new window.daum.maps.Marker({\n        map: this.state.daumMap,\n        position: daumMap.getCenter()\n      });\n      var geocoder = new window.daum.maps.services.Geocoder();\n      this.setState({\n        el: el,\n        daumMap: daumMap,\n        marker: marker,\n        geocoder: geocoder\n      });\n      marker.setMap(this.state.daumMap);\n      window.daum.maps.event.addListener(daumMap, 'click', this.handleMapClick);\n    }\n  }, {\n    key: \"setMarker\",\n    value: function setMarker(locPosition) {\n      var marker = this.state.marker;\n      marker.setMap(this.state.daumMap);\n      marker.setPosition(locPosition);\n    }\n  }, {\n    key: \"handleMapClick\",\n    value: function handleMapClick(e) {\n      console.log(e.latLng);\n      this.setState({\n        latitude: e.latLng.ib,\n        longitude: e.latLng.jb\n      });\n      this.setMarker(e.latLng);\n    }\n  }, {\n    key: \"handleAddressChange\",\n    value: function handleAddressChange(e) {\n      this.setState({\n        address: e.target.value\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      e.preventDefault();\n      var _this$state = this.state,\n          date = _this$state.date,\n          latitude = _this$state.latitude,\n          longitude = _this$state.longitude,\n          profileId = _this$state.profileId,\n          address = _this$state.address,\n          info = _this$state.info;\n      var url = \"/api/report/missing-person/\".concat(profileId);\n      fetch(url, {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"witnessAddress\": address,\n          \"witnessedAt\": date,\n          \"latitude\": latitude,\n          \"longitude\": longitude,\n          \"description\": info\n        })\n      }).then(function (res) {\n        if (res.status === 200) {\n          window.location.href = \"/person/\".concat(profileId);\n        }\n      });\n    }\n  }, {\n    key: \"handleInfoChange\",\n    value: function handleInfoChange(e) {\n      console.log(e.target.value);\n      this.setState({\n        info: e.target.value\n      });\n    }\n  }, {\n    key: \"handleDateChange\",\n    value: function handleDateChange(e) {\n      this.setState({\n        date: e.target.value\n      });\n    }\n  }, {\n    key: \"searchAddress\",\n    value: function searchAddress(e) {\n      e.preventDefault();\n      var daumMap = this.state.daumMap;\n      var searchWord = document.getElementById('search_address').value;\n      console.log(searchWord, 'searchWord');\n      console.log(daumMap, 'clicked');\n      this.state.geocoder.addressSearch(searchWord, function (result, status) {\n        if (status === window.daum.maps.services.Status.OK) {\n          var coords = new window.daum.maps.LatLng(result[0].y, result[0].x);\n          daumMap.setCenter(coords);\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var mapStyle = {\n        width: '100%',\n        height: '500px',\n        overflow: 'hidden',\n        margin: '15px 0'\n      };\n      return React.createElement(\"div\", {\n        class: \"ui form\",\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: 'center',\n          flexDirection: 'column'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        style: {\n          width: \"80vw\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"ui calendar\",\n        style: {\n          margin: \"15px 0\"\n        },\n        id: \"example1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"\\uB0A0\\uC9DC\"), React.createElement(\"div\", {\n        class: \"ui input left icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"calendar icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"date\",\n        placeholder: \"Date/Time\",\n        onChange: this.handleDateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"ui divider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"\\uC7A5\\uC18C\"), React.createElement(\"div\", {\n        id: \"map\",\n        style: mapStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"ui input\",\n        style: {\n          margin: '15px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"search_address\",\n        style: {\n          width: \"80%\"\n        },\n        type: \"text\",\n        onChange: this.handleAddressChange,\n        placeholder: \"\\uB3C4\\uB85C\\uBA85 \\uC8FC\\uC18C\\uB97C \\uC785\\uB825\\uD574 \\uC8FC\\uC138\\uC694\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        class: \"ui primary basic button\",\n        onClick: this.searchAddress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \">\")))), React.createElement(\"div\", {\n        class: \"ui divider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        class: \"field\",\n        style: {\n          margin: \"20px 0\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        style: {\n          marginBottom: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"\\uC81C\\uBCF4 \\uB0B4\\uC6A9\"), React.createElement(\"textarea\", {\n        onChange: this.handleInfoChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        class: \"ui button blue\",\n        style: {\n          marginBottom: '50px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        style: {\n          color: 'white'\n        },\n        href: \"/submit/1\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"\\uC81C\\uBCF4\\uD558\\uAE30\"))));\n    }\n  }]);\n\n  return Map;\n}(Component);\n\nexport { Map as default };","map":{"version":3,"sources":["/Users/kakao/swantest/whichwhich/my-app/src/Component/Map.js"],"names":["React","Component","Map","setMarker","bind","handleMapClick","searchAddress","handleSubmit","handleDateChange","handleInfoChange","handleAddressChange","state","el","daumMap","marker","geocoder","latitude","longitude","profileId","address","date","info","id","props","match","params","console","log","setState","document","getElementById","window","daum","maps","center","LatLng","level","Marker","map","position","getCenter","services","Geocoder","setMap","event","addListener","locPosition","setPosition","e","latLng","ib","jb","target","value","preventDefault","url","fetch","method","headers","body","JSON","stringify","then","res","status","location","href","searchWord","addressSearch","result","Status","OK","coords","y","x","setCenter","mapStyle","width","height","overflow","margin","display","justifyContent","alignItems","flexDirection","marginBottom","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nexport default class Map extends Component{\n  constructor() {\n    super();\n    this.setMarker = this.setMarker.bind(this);\n    this.handleMapClick = this.handleMapClick.bind(this);\n    this.searchAddress = this.searchAddress.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleDateChange = this.handleDateChange.bind(this);\n    this.handleInfoChange = this.handleInfoChange.bind(this);\n    this.handleAddressChange = this.handleAddressChange.bind(this);\n    this.state = {\n      el: '',\n      daumMap: '',\n      marker: '',\n      geocoder: '',\n      latitude: 0,\n      longitude: 0,\n      profileId: 0,\n      address: '',\n      date: '',\n      info: ''\n    }\n  }\n\n  componentDidMount() {\n    const { id } = this.props.match.params;\n    console.log(id, 'got id');   \n    this.setState({\n      profileId: id\n    })\n\n    let el = document.getElementById('map');\n    let daumMap = new window.daum.maps.Map(el, {\n      center: new window.daum.maps.LatLng(37.401, 127.109),\n      level: 4\n    });\n\n    let marker = new window.daum.maps.Marker({\n      map: this.state.daumMap,\n      position: daumMap.getCenter()\n    });\n\n    let geocoder = new window.daum.maps.services.Geocoder();\n\n    this.setState({\n      el, daumMap, marker, geocoder\n    });\n\n    marker.setMap(this.state.daumMap);\n\n    window.daum.maps.event.addListener(daumMap, 'click', this.handleMapClick);\n  }\n\n  setMarker(locPosition) {\n    const { marker } = this.state;\n    \n    marker.setMap(this.state.daumMap);\n    marker.setPosition(locPosition);\n  }\n\n  handleMapClick(e) {\n    console.log(e.latLng);\n    this.setState({\n      latitude: e.latLng.ib,\n      longitude: e.latLng.jb\n    });\n    this.setMarker(e.latLng);\n  }\n\n  handleAddressChange(e) {\n    this.setState({\n      address: e.target.value\n    })\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const { date, latitude, longitude, profileId, address, info } = this.state;\n    \n    const url = `/api/report/missing-person/${profileId}`;\n    \n    fetch(url, {\n      method: 'post',\n      headers: {'Content-Type':'application/json'},\n      body: JSON.stringify({\n        \"witnessAddress\" : address,\n        \"witnessedAt\": date,\n        \"latitude\": latitude, \n        \"longitude\": longitude,\n        \"description\": info\n      }),\n    }).then(res => {\n      if(res.status === 200) {\n        window.location.href=`/person/${profileId}`;\n      }\n    });\n  }\n\n  handleInfoChange(e) {\n    console.log(e.target.value);\n    this.setState({\n      info: e.target.value\n    })\n  }\n\n  handleDateChange(e) {\n    this.setState({\n      date: e.target.value\n    })\n  }\n\n  searchAddress(e) {\n    e.preventDefault();\n    const { daumMap } = this.state;\n    const searchWord = document.getElementById('search_address').value;\n    console.log(searchWord, 'searchWord');\n    console.log(daumMap,'clicked');\n    this.state.geocoder.addressSearch(searchWord, function(result, status) {\n      if (status === window.daum.maps.services.Status.OK) {\n        let coords = new window.daum.maps.LatLng(result[0].y, result[0].x);\n        daumMap.setCenter(coords);\n      }\n    });\n    \n  }\n\n  render() {\n    const mapStyle = {\n      width: '100%',\n      height: '500px',\n      overflow: 'hidden',\n      margin: '15px 0',\n    }\n\n    return(\n    <div class=\"ui form\" style={{display: \"flex\", justifyContent: \"center\", alignItems: 'center', flexDirection: 'column'}}>\n      <form style={{width: \"80vw\"}}>\n        <div class=\"ui calendar\" style={{margin: \"15px 0\"}}id=\"example1\">\n          <h3>날짜</h3>\n          <div class=\"ui input left icon\">\n            <i class=\"calendar icon\"></i>\n            <input type=\"date\" placeholder=\"Date/Time\" onChange={this.handleDateChange} />\n          </div>\n        </div>\n        <div class=\"ui divider\"></div>\n        <div>\n          <h3>장소</h3>\n          <div id=\"map\" style={mapStyle}>\n          </div>\n          <div style={{display: 'flex', justifyContent: 'center', alignItems: 'center', }}>\n          <div class=\"ui input\" style={{margin: '15px 0'}}>\n            <input id=\"search_address\" style={{width: \"80%\"}}type=\"text\" onChange={this.handleAddressChange} placeholder=\"도로명 주소를 입력해 주세요\"/>\n            <button class=\"ui primary basic button\" onClick={this.searchAddress}>></button>\n          </div>\n          </div>\n        </div>\n        <div class=\"ui divider\"></div>\n        <div class=\"field\" style={{margin: \"20px 0\"}}>\n          <h3 style={{marginBottom: \"20px\"}}>제보 내용</h3>\n          <textarea onChange={this.handleInfoChange}></textarea>\n        </div>\n        <span class=\"ui button blue\" style={{marginBottom: '50px'}}><a style={{color: 'white'}}href=\"/submit/1\" onClick={this.handleSubmit} >제보하기</a></span>\n        {/* <input type=\"submit\" value=\"Submit\" onClick={this.handleSubmit} /> */}\n      </form>\n    </div>\n    );\n  }\n\n}"]},"metadata":{},"sourceType":"module"}